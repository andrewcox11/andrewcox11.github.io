---
title: DANL Project
subtitle: "Data-Driven Mastery: Unlocking Business Potential"
author : 
 - Andrew Cox
 - Ann Brennan 
 - Alex Ventresca



toc: true
toc-title: "Table of Contents"
toc-depth: 2
number-sections: true

fig-width: 9

execute:
  code-tools: true
  message: false
  warning: false

from: markdown+emoji
---
```{r setup}
#| include: false
library(tidyverse)
library(skimr)
library(ggthemes)
library(hrbrthemes)

theme_set(theme_ipsum()+
          theme(strip.background =element_rect(fill="lightgray"),
                axis.title.x = 
                  element_text(angle = 0,
                               size = rel(1.33),
                               margin = margin(10,0,0,0)),
                axis.title.y = 
                  element_text(angle = 0,
                               size = rel(1.33),
                               margin = margin(0,10,0,0))
                )
          )
```



# Introduction

We are using the climate_finance data.frame :clap:

```{r}
1 + 1
```


# Data

The data.frame `mpg` contains a subset of the fuel economy data that the EPA makes available on [https://fueleconomy.gov/](https://fueleconomy.gov/). It contains only models which had a new release every year between 1999 and 2008 - this was used as a proxy for the popularity of the car. :oncoming_automobile:


## Summary Statistics

```{r}
path <- 'https://bcdanl.github.io/data/climate_finance_energy.csv'
climate_finance <- read_csv(path)
```

```{r}
#| results: asis
#| echo: false
rmarkdown::paged_table(climate_finance) 
```


```{r}
skim(climate_finance) %>% 
  select(-n_missing)
```


## Yearly trend of total funding contributions varies by Energy and Status 
With these graphs we can see the amount of committed funding has been increasing at a significant rate while provided funding seems to stay constant. The gap we see in provided funding size between the energy and non energy sectors is likely due to these projects requiring a significant amount of funds upfront.


```{r}
positive_contributions <- climate_finance %>% 
  filter(Status == "provided",                       
         `Type of support` == "adaptation") %>%      
  group_by(Party, Year) %>%                          
  summarise(Contribution = sum(Contribution, na.rm = T)) %>%  
  filter(Contribution > 0) %>%                       
  group_by(Party) %>%                                
  count() %>%                                        
  filter(n == 2018 - 2011 + 1)  %>%                  
  select(Party) %>% 
  distinct()    
```


```{r}
skim(climate_finance) %>% 
  select(-n_missing)
```


## Yearly trend of total funding contributions varies by Energy and Status 
With these graphs we can see the amount of committed funding has been increasing at a significant rate while provided funding seems to stay constant. The gap we see in provided funding size between the energy and non energy sectors is likely due to these projects requiring a significant amount of funds upfront.


```{r}
climate_finance %>% 
  group_by(Energy, Status, Year) %>% 
  summarise(funding_tot = sum(Contribution, na.rm = T)) %>% 
  ggplot(aes(x = Year, y = funding_tot)) +
  geom_line(aes(color = Status)) +
  geom_point() +
  facet_wrap(Energy ~.) +
  scale_y_comma()
```

## Analysis

## Financial Contributions to Other Countries

Various parties in the climate_finance data frame have made positive financial contributions to other countries for adaptation projects. Here, we will find the number of parties that made a positive contribution to another country for every year between 2011 and 2018.

```{r}
positive_contributions <- climate_finance %>% 
  filter(Status == "provided",                       
         `Type of support` == "adaptation") %>%      
  group_by(Party, Year) %>%                          
  summarise(Contribution = sum(Contribution, na.rm = T)) %>%  
  filter(Contribution > 0) %>%                       
  group_by(Party) %>%                                
  count() %>%                                        
  filter(n == 2018 - 2011 + 1)  %>%                  
  select(Party) %>% 
  distinct()    
```

```{r}
nrow(positive_contributions)
```

[1] 8
