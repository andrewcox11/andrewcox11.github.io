---
title: DANL Project
subtitle: "Data-Driven Mastery: Unlocking Business Potential"
author : 
 - Andrew Cox
 - Ann Brennan 
 - Alex Ventresca



toc: true
toc-title: "Table of Contents"
toc-depth: 2
number-sections: true

fig-width: 9

execute:
  code-tools: true
  message: false
  warning: false

from: markdown+emoji
---
```{r setup}
#| include: false
library(tidyverse)
library(skimr)
library(ggthemes)
library(hrbrthemes)

theme_set(theme_ipsum()+
          theme(strip.background =element_rect(fill="lightgray"),
                axis.title.x = 
                  element_text(angle = 0,
                               size = rel(1.33),
                               margin = margin(10,0,0,0)),
                axis.title.y = 
                  element_text(angle = 0,
                               size = rel(1.33),
                               margin = margin(0,10,0,0))
                )
          )
```



# Introduction

About this project :clap:

This project will address the various financial actions taken by various parties to address climate change.



```{r}
1 + 1
```


# Variable Description 

Party: a party (country) that provides a funding contribution to recipient country/region for their cliamte change project.

Recipient country/region: Recipient country or region

Project/programme/activity: Details in the climate change project

Type of support:adaptation if the climate change project is related to adaptation project. mitigation if the climate change project is related to mitigation project.

Year: Year that funding contribution is committed or provided.

Contribution: An amount of funding contribution for the climate change project (in USD).

Status: committed if a party commits to providing the funding contribution for the climate change project, but the funding contribution is NOT actually provided. provided if the funding contribution was provided for the climate change project.

Energy: TRUE if the project is energy-related; FALSE otherwise.


## Summary Statistics

```{r}
path <- 'https://bcdanl.github.io/data/climate_finance_energy.csv'
climate_finance <- read_csv(path)
```

```{r}
#| results: asis
#| echo: false
rmarkdown::paged_table(climate_finance) 
```


```{r}
skim(climate_finance) %>% 
  select(-n_missing)
```


## Yearly trend of total funding contributions varies by Energy and Status 
With these graphs we can see the amount of committed funding has been increasing at a significant rate while provided funding seems to stay constant. The gap we see in provided funding size between the energy and non energy sectors is likely due to these projects requiring a significant amount of funds upfront.


```{r}
positive_contributions <- climate_finance %>% 
  filter(Status == "provided",                       
         `Type of support` == "adaptation") %>%      
  group_by(Party, Year) %>%                          
  summarise(Contribution = sum(Contribution, na.rm = T)) %>%  
  filter(Contribution > 0) %>%                       
  group_by(Party) %>%                                
  count() %>%                                        
  filter(n == 2018 - 2011 + 1)  %>%                  
  select(Party) %>% 
  distinct()    
```


```{r}
skim(climate_finance) %>% 
  select(-n_missing)
```


## Yearly trend of total funding contributions varies by Energy and Status 
With these graphs we can see the amount of committed funding has been increasing at a significant rate while provided funding seems to stay constant. The gap we see in provided funding size between the energy and non energy sectors is likely due to these projects requiring a significant amount of funds upfront.


```{r}
climate_finance %>% 
  group_by(Energy, Status, Year) %>% 
  summarise(funding_tot = sum(Contribution, na.rm = T)) %>% 
  ggplot(aes(x = Year, y = funding_tot)) +
  geom_line(aes(color = Status)) +
  geom_point() +
  facet_wrap(Energy ~.) +
  scale_y_comma()
```

## Analysis

## Financial Contributions to Other Countries

Various parties in the climate_finance data frame have made positive financial contributions to other countries for adaptation projects. Here, we will find the number of parties that made a positive contribution to another country for every year between 2011 and 2018.

```{r}
positive_contributions <- climate_finance %>% 
  filter(Status == "provided",                       
         `Type of support` == "adaptation") %>%      
  group_by(Party, Year) %>%                          
  summarise(Contribution = sum(Contribution, na.rm = T)) %>%  
  filter(Contribution > 0) %>%                       
  group_by(Party) %>%                                
  count() %>%                                        
  filter(n == 2018 - 2011 + 1)  %>%                  
  select(Party) %>% 
  distinct()    
```

```{r}
nrow(positive_contributions)
```


